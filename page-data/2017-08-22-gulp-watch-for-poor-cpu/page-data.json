{"componentChunkName":"component---src-templates-page-js","path":"/2017-08-22-gulp-watch-for-poor-cpu/","result":{"data":{"site":{"siteMetadata":{"title":"HP goes FE","author":"@hikerpig"}},"markdownRemark":{"id":"359af730-d276-5ecc-a427-498b9d451fc8","html":"<p>Gulp 的文件监听使用了 <a href=\"https://github.com/shama/gaze\">gaze</a>，如果只看了 Gulp 的 API 文档可能会漏掉一些参数。</p>\n<p><a href=\"https://github.com/gulpjs/gulp/blob/master/docs/API.md\">Gulp 文档</a> 中提到:</p>\n<p><code>gulp.watch(glob[, opts], tasks)</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">opts\n\nType: Object\n\nOptions, that are passed to gaze.</code></pre></div>\n<p>options 包括:</p>\n<ul>\n<li><code>interval</code> {integer} Interval to pass to fs.watchFile</li>\n<li><code>debounceDelay</code> {integer} Delay for events called in succession for the same file/event in milliseconds</li>\n<li><code>mode</code> {string} Force the watch mode. Either 'auto' (default), 'watch' (force native events), or 'poll' (force stat polling).</li>\n<li><code>cwd</code> {string} The current working directory to base file patterns from. Default is process.cwd()</li>\n</ul>\n<p>gaze 的设置参数中，感觉最有用却被遗漏的就是 <code>interval</code> 了，好多人提到 <a href=\"https://github.com/gulpjs/gulp/issues/634\">gulp.watch CPU 占用太高</a>，因为 gaze 默认 100ms 检查监听的文件状态。</p>\n<p>如果监听文件太多导致 CPU 占用居高不下的话，可以考虑加大 <code>interval</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">gulp<span class=\"token punctuation\">.</span><span class=\"token function\">watch</span><span class=\"token punctuation\">(</span>blob<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>interval<span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> tasks<span class=\"token punctuation\">)</span></code></pre></div>\n<p>笔记本就不会呼呼乱叫了。</p>","excerpt":"Gulp 的文件监听使用了 gaze，如果只看了 Gulp 的 API 文档可能会漏掉一些参数。 Gulp 文档 中提到: gulp.watch(glob[, opts], tasks) options 包括: interval {integer} Interval to…","tableOfContents":"","fields":{"slug":"/2017-08-22-gulp-watch-for-poor-cpu/","featureImageSrc":null},"frontmatter":{"title":"给开发减压的 gulp.watch 配置","date":"2017-08-22","author":null,"tags":[],"use_toc":null,"coverImage":null}}},"pageContext":{"type":"posts","next":{"fields":{"slug":"/2017-08-05-Holy-Awesome-Spacemacs/"},"frontmatter":{"title":"Holy Awesome Spacemacs","tags":["emacs","editor","productivity","工具"]},"fileAbsolutePath":"/Users/bytedance/mydemos/gatsby-hello-friend/content/posts/2017-08-05-Holy-Awesome-Spacemacs.md"},"previous":{"fields":{"slug":"/2017-09-07-Using-Object.create/"},"frontmatter":{"title":"使用 Object.create(null) 创建空对象","tags":["Javascript"]},"fileAbsolutePath":"/Users/bytedance/mydemos/gatsby-hello-friend/content/posts/2017-09-07-Using-Object.create.md"},"slug":"/2017-08-22-gulp-watch-for-poor-cpu/"}},"staticQueryHashes":["1425477374","3128451518"]}